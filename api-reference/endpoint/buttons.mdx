---
title: "Enviar Botão"
icon: "square-check"
api: "POST https://{railway_domain}/send_wbuttons"
---

import { ApiKeySync } from '/snippets/ApiKeySync.mdx';

<ApiKeySync />

Envia uma mensagem com um botão interativo. O endpoint `send_wbuttons` é uma abreviação para **Send With Buttons** (_Enviar com Botão_).

## Como Funciona (Stateless)

Os botões no **ZapUnlocked-API** são **totalmente stateless** (sem estado). Isso significa que as instruções de para onde enviar os dados e o que enviar estão embutidas no próprio botão de forma criptografada.

<Tip>
  **Vantagem**: Você não precisa de um banco de dados local para "lembrar" o que um botão deve fazer. O bot descriptografa as instruções no momento do clique.
</Tip>

### Fluxo de Execução
1. Você envia o botão com a config de `webhook`.
2. A API gera um token criptografado e coloca no ID do botão.
3. Quando o usuário clica, o bot:
    - Recebe o clique.
    - Descriptografa as instruções.
    - Substitui os Placeholders (ex: `{{from}}`).
    - Dispara o POST para sua URL.

### Placeholders Disponíveis
Você pode usar variáveis no seu `body` ou `headers` do webhook que serão substituídas no momento do clique:

| Placeholder | Descrição |
| :--- | :--- |
| `{{from}}` | Número de quem clicou |
| `{{text}}` | Texto do botão clicado |
| `{{timestamp}}` | Data e hora do clique |

<Note>
  **Validade**: Por segurança, os botões gerados têm validade de **24 horas**. Após esse período, o clique não disparará mais o webhook.
</Note>

### Corpo da Requisição (Body)

<ParamField path="railway_domain" type="string" required placeholder="seu-projeto.up.railway.app">
  URL do seu projeto na Railway (sem https:// e sem a barra final).
</ParamField>

<ParamField header="x-api-key" type="string" required placeholder="SUA_SENHA_SECRETA">
  Chave de autenticação da API.
</ParamField>

<ParamField body="phone" type="string" required>
  Número do destinatário com código do país (ex: `5511999999999`).
</ParamField>

<ParamField body="message" type="string" required>
  Texto principal da mensagem que aparecerá acima do botão.
</ParamField>

<ParamField body="button_text" type="string" required>
  O texto dentro do botão.
</ParamField>

<ParamField body="reply" type="string">
  Responde a uma mensagem específica. Pode ser o **ID da mensagem** ou o **texto exato** da mensagem (dependendo do parâmetro `type`).
</ParamField>

<ParamField body="type" type="string" default="id">
  Define como o parâmetro `reply` será interpretado:
  - `id`: Busca a mensagem pelo ID único do WhatsApp
  - `text`: Busca a mensagem mais recente com o texto exato fornecido (case-insensitive, normalizado)
</ParamField>

<ParamField body="reaction" type="string">
  Emoji opcional para reagir automaticamente à mensagem quando o usuário clicar no botão.
</ParamField>

<ParamField body="webhook" type="object">
  Configuração do destino dos dados quando houver o clique.

  <Expandable title="Configuração do Webhook">
    <ParamField body="url" type="string" required>
      URL que receberá o POST.
    </ParamField>
    <ParamField body="method" default="POST" type="string">
      Método HTTP.
    </ParamField>
    <ParamField body="headers" type="object">
      Headers customizados para a requisição (ex: Autenticação).
    </ParamField>
    <ParamField body="body" type="object">
      JSON customizado que você quer receber. Aceita placeholders como `{{from}}` e `{{text}}`.
    </ParamField>
  </Expandable>
</ParamField>

### Resposta

<ResponseExample>

```json 200 Sucesso
{
  "success": true,
  "message": "Mensagem enviada ✅"
}
```


```json 401 Erro
{
  "error": "Unauthorized",
  "message": "API Key inválida ou ausente"
}
```

</ResponseExample>