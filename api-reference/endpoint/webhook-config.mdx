---
title: 'Configurar'
icon: 'globe'
api: 'POST https://{railway_domain}/webhook/config'
---

import { ApiKeySync } from '/snippets/ApiKeySync.mdx';

<ApiKeySync />

O Webhook Global permite receber notifica√ß√µes de **todas as mensagens recebidas** pelo bot em uma URL externa. Este endpoint cria ou atualiza a configura√ß√£o.

### Autentica√ß√£o

<ParamField path="railway_domain" type="string" required placeholder="seu-projeto.up.railway.app">
  URL do seu projeto na Railway (sem https:// e sem a barra final).
</ParamField>

<ParamField header="x-api-key" type="string" required placeholder="SUA_SENHA_SECRETA">
  Chave de autentica√ß√£o da API.
</ParamField>

### Body

<ParamField body="url" type="string" required>
  A URL HTTPS que receber√° os eventos.
</ParamField>

<ParamField body="method" type="enum" default="POST">
  M√©todo HTTP a ser usado (`POST`, `GET`, `PUT`).
</ParamField>

<ParamField body="headers" type="object">
  Headers personalizados para enviar na requisi√ß√£o (ex: Tokens de Auth).
  Suporta placeholders.
</ParamField>

<ParamField body="body" type="object">
  O JSON que ser√° enviado para sua URL.
  Suporta placeholders para interpolar dados da mensagem.
</ParamField>

<ParamField body="enabled" type="boolean" default="true">
  Se o webhook deve come√ßar ativado.
</ParamField>

### Placeholders

Voc√™ pode usar as seguintes vari√°veis no seu `body` ou `headers`. O sistema ir√° substitu√≠-las pelos dados reais da mensagem recebida:

| Placeholder | Descri√ß√£o |
| :--- | :--- |
| `{{from}}` | N√∫mero de quem enviou (remetente) |
| `{{name}}` | Nome do contato (se dispon√≠vel) |
| `{{text}}` | Conte√∫do da mensagem de texto |
| `{{phone}}` | Mesmo que `from` |
| `{{id}}` | ID √∫nico da mensagem |
| `{{timestamp}}` | Data e hora do recebimento |

### Exemplo de Configura√ß√£o

Exemplo de body para configurar o webhook:

```json
{
  "url": "https://meu-sistema.com/webhook",
  "method": "POST",
  "headers": {
    "Authorization": "Bearer 123456"
  },
  "body": {
    "event": "message",
    "sender": "{{from}}",
    "content": "{{text}}",
    "received_at": "{{timestamp}}"
  }
}
```

<ResponseExample>

```json 200 Sucesso
{
  "success": true,
  "message": "Webhook configurado",
  "config": {
    "enabled": true,
    "url": "https://seu-sistema.com/webhook",
    "method": "POST",
    "headers": {
      "Content-Type": "application/json"
    },
    "body": {
      "content": "üì© O n√∫mero {{from}} enviou **{{text}}**"
    }
  }
}
```

</ResponseExample>
