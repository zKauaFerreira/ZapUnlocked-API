---
title: "Webhooks e Recebimento"
icon: "webhook"
description: "Receba mensagens e cliques em botões em tempo real."
---

import { ApiKeySync } from '/snippets/ApiKeySync.mdx';

<ApiKeySync />

Webhooks no **ZapUnlocked-API** são **stateless** (sem estado). Isso significa que as instruções de para onde enviar os dados e o que enviar estão embutidas no próprio botão que o usuário clica.

<Note>
  **Vantagem**: Você não precisa de um banco de dados local para "lembrar" o que um botão deve fazer. O bot é totalmente autossuficiente.
</Note>

## <Icon icon="gears" iconType="sharp-regular" color="#9d4fe6" size={22} /> Como Funciona

Ao criar um botão com o endpoint `/send_wbuttons`, você define um objeto `webhook`. A API gera um token criptografado contendo essas instruções e o define como o ID do botão.

Quando o usuário clica, o **ZapUnlocked-API**:

1. Recebe o clique.
2. Descriptografa as instruções do ID.
3. Substitui os **Placeholders** (veja abaixo).
4. Dispara o POST para sua URL.

### <Icon icon="brackets-curly" iconType="sharp-regular" color="#9d4fe6" size={22} /> Placeholders Disponíveis

Você pode usar variáveis no seu `body` ou `headers` do webhook que serão substituídas no momento do clique:

| Placeholder     | Descrição                  | Exemplo de Saída       |
| :-------------- | :------------------------- | :--------------------- |
| `{{from}}`      | Número de quem clicou      | `5511999999999`        |
| `{{text}}`      | Texto do botão clicado     | `Sim, aceito!`         |
| `{{timestamp}}` | Data e hora em formato ISO | `2026-01-13T14:50:00Z` |

### <Icon icon="code" iconType="sharp-regular" color="#9d4fe6" size={22} /> Exemplo de Payload Recebido

Seu servidor receberá um JSON com a estrutura que você definiu, com os placeholders resolvidos:

```json
{
  "event": "button_click",
  "user": "5511999999999",
  "button": "Confirmar Compra",
  "time": "2026-01-13T14:50:00Z"
}
```

<Info>
  **Interatividade Stateless**: Repare que o objeto de clique contém o ID selecionado. Esse ID foi descriptografado pelo bot no momento do clique, permitindo que seu sistema identifique a ação sem precisar de um banco de dados local para "lembrar" o que aquele botão fazia.
</Info>

## <Icon icon="shield-check" iconType="sharp-regular" color="#9d4fe6" size={22} /> Segurança

Recomendamos que você valide a origem das requisições no seu servidor de webhook para garantir que elas venham apenas da sua instância da **ZapUnlocked-API**.